<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
   <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ayat Al-Qur'an Hari Ini & Pencarian</title>

  <link rel="manifest" href="manifest.json">
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js')
        .then(() => console.log('‚úÖ Service Worker terdaftar'))
        .catch(err => console.error('‚ùå SW error:', err));
    }
  </script>
  
  <script src="data-quran.min.js"></script>
  <style>
    :root {
      --primary: #1abc9c;
      --secondary: #16a085;
      --light-bg: #f8fdfb;
      --dark-text: #2c3e50;
      --muted: #7f8c8d;
    }
    * { box-sizing: border-box; }
    body {
      font-family: "Poppins", sans-serif;
      background: var(--light-bg);
      margin: 0;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      color: var(--dark-text);
    }
    header {
      background: var(--primary);
      color: white;
      padding: 15px 20px;
      text-align: center;
      font-size: 1.4em;
      font-weight: 600;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    }
    main {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      max-width: 900px;
      margin: auto;
    }
    .controls {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      width: 100%;
      margin-bottom: 15px;
    }
    select, input {
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #ccc;
      font-size: 1em;
      min-width: 180px;
      transition: all 0.3s ease;
    }
    select:focus, input:focus {
      border-color: var(--primary);
      outline: none;
      box-shadow: 0 0 5px rgba(26,188,156,0.4);
    }
    button {
      padding: 10px 15px;
      border: none;
      border-radius: 10px;
      background-color: var(--primary);
      color: white;
      cursor: pointer;
      font-size: 1em;
      transition: 0.3s;
    }
    button:hover { background-color: var(--secondary); }
    #counter {
      margin: 10px 0;
      color: var(--muted);
      font-size: 0.95em;
      font-weight: 500;
    }
    .pagination {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 5px;
      margin: 15px 0;
    }
    .pagination button {
      background: #3498db;
      border: none;
      color: white;
      padding: 7px 12px;
      border-radius: 6px;
      cursor: pointer;
      transition: 0.3s;
    }
    .pagination button.active { background: var(--primary); }
    .pagination button:hover { background: var(--secondary); }
    .card {
      background: white;
      padding: 20px 25px;
      border-radius: 15px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      width: 100%;
      margin-bottom: 15px;
      transition: transform 0.2s ease;
      position: relative;
    }
    .card:hover { transform: translateY(-3px); }
    .ayat {
      direction: rtl;
      font-size: 1.6em;
      color: var(--dark-text);
      line-height: 1.8;
      margin-bottom: 10px;
    }
    .arti {
      font-size: 1.05em;
      color: #34495e;
      margin-top: 5px;
    }
    .info {
      font-size: 0.9em;
      color: var(--muted);
      margin-top: 8px;
    }
    mark {
      background: #ffeaa7;
      border-radius: 3px;
      padding: 0 3px;
    }
   .play-btn {
  position: absolute;
  bottom: 12px;
  right: 15px;
  background: var(--primary);
  color: white;
  border: none;
  border-radius: 50%;
  width: 42px;
  height: 42px;
  cursor: pointer;
  font-size: 1.2em;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.15);
  transition: transform 0.2s, background 0.3s;
}
.play-btn:hover {
  background: var(--secondary);
  transform: scale(1.08);
}
@keyframes pulse {
  0% { box-shadow: 0 0 0 0 rgba(255, 215, 0, 0.6); }
  70% { box-shadow: 0 0 0 10px rgba(255, 215, 0, 0); }
  100% { box-shadow: 0 0 0 0 rgba(255, 215, 0, 0); }
}

.play-btn.playing {
  background: gold;
  color: #2c3e50;
  animation: pulse 1.5s infinite;
  transform: scale(1.08);
}
    /* üíö Support Me Button */
    .support {
      margin-top: 10px;
      text-align: center;
    }
    .support button {
      background: linear-gradient(135deg, #1abc9c, #16a085);
      font-weight: 600;
      border-radius: 25px;
      padding: 10px 20px;
    }
    .support button:hover {
      background: linear-gradient(135deg, #16a085, #1abc9c);
    }

    /* ‚öôÔ∏è Footer */
    footer {
      background: var(--primary);
      color: white;
      text-align: center;
      padding: 20px 10px;
      font-size: 0.9em;
      margin-top: auto;
      line-height: 1.6;
    }
    footer a {
      color: #f9f9f9;
      text-decoration: underline;
    }
    footer a:hover {
      color: #fff;
      text-decoration: none;
    }

    @media (max-width: 600px) {
      select, input, button { width: 100%; }
      .controls { flex-direction: column; align-items: stretch; }
    }
  </style>
</head>
<body>
  <header>
    <h1>üåô Ayat Al-Qur'an Hari Ini üåô </h1>
  </header>
<main>
  <div class="card">
    <div id="ayat" class="ayat">Memuat ayat...</div>
    <div id="arti" class="arti"></div>
    <div id="sura" class="sura"></div>
    <div id="tanggal" class="tanggal"></div>
  </div>

  <h2>üîç Cari Ayat Al-Qur'an</h2>
  <div id="search-box">
    <select id="surahSelect"></select>
    <input type="text" id="searchInput" placeholder="Ketik teks Arab atau terjemahan..." />
    <button onclick="cariAyat()">Cari</button>
  </div>

  <div id="counter" class="counter"></div>
  <div id="hasil" style="max-width: 700px;"></div>
  <div id="pagination" class="pagination"></div>
 <!-- üíö Support Me -->
    <div class="support">
      <button onclick="window.open('http://lynk.id/alima/s/5k0eny0qk69k', '_blank')">üíö Support Me</button>
    </div>
  </main>

  <!-- ‚öôÔ∏è Footer -->
  <footer>
    <strong>Ayat Al-Qur'an Hari ini</strong><br>
    Versi 1.0 ‚Ä¢ Dibuat untuk membantu membaca & memahami Al-Qur‚Äôan üåô<br>
    Pengembang: <a href="https://github.com/sutanto-teguh" target="_blank">Teguh Sutanto</a><br>
  </footer>
  
  <script>
    let hasilPencarian = [];
    const hasilPerHalaman = 10;
    let halamanSaatIni = 1;

    // ==== Inisialisasi Dropdown Surah ====
    function isiDropdownSurah() {
      const select = document.getElementById("surahSelect");
      const map = new Map();
      QURAN_DATA.forEach(a => {
        if (!map.has(a.suraIndex)) {
          map.set(a.suraIndex, a.suraName);
        }
      });
      const surahList = Array.from(map, ([index, name]) => ({ index, name })).sort((a,b)=>a.index-b.index);
      select.innerHTML = '<option value="all">Semua Surah</option>' +
        surahList.map(s => `<option value="${s.index}">${s.index}. ${s.name}</option>`).join("");
    }

    // ==== Ayat Hari Ini ====
    function tampilkanAyatHariIni() {
      const today = new Date();
      const startOfYear = new Date(today.getFullYear(), 0, 0);
      const diff = today - startOfYear;
      const oneDay = 1000 * 60 * 60 * 24;
      const dayOfYear = Math.floor(diff / oneDay);
      const index = dayOfYear % QURAN_DATA.length;
      const ayat = QURAN_DATA[index];
      document.getElementById("ayat").textContent = ayat.arab;
      document.getElementById("arti").textContent = ayat.indo;
      document.getElementById("sura").textContent = `Surah ${ayat.suraName} (${ayat.suraIndex}:${ayat.ayaIndex})`;
      document.getElementById("tanggal").textContent = today.toLocaleDateString("id-ID", {
        weekday: "long", year: "numeric", month: "long", day: "numeric"
      });
    }

    // ==== Highlight ====
    function highlight(text, query) {
      if (!query) return text;
      const regex = new RegExp(`(${query})`, "gi");
      return text.replace(regex, "<mark>$1</mark>");
    }

    // ==== Salin ke Clipboard ====
    function salinAyat(arab, indo, ref) {
      const teks = `${arab}\n${indo}\n(${ref})`;
      navigator.clipboard.writeText(teks).then(() => {
        alert("‚úÖ Ayat berhasil disalin ke clipboard!");
      }).catch(() => {
        alert("‚ùå Gagal menyalin ayat.");
      });
    }

    // ==== Tampilkan Hasil ====
    function tampilkanHasil(halaman = 1) {
      const hasilDiv = document.getElementById("hasil");
      hasilDiv.innerHTML = "";
      const awal = (halaman - 1) * hasilPerHalaman;
      const akhir = awal + hasilPerHalaman;
      const subset = hasilPencarian.slice(awal, akhir);
      const query = document.getElementById("searchInput").value.trim();
      const total = hasilPencarian.length;

      const counterDiv = document.getElementById("counter");
      if (total > 0) {
        counterDiv.textContent = `Ditemukan ${total} ayat (Menampilkan ${awal + 1}‚Äì${Math.min(akhir, total)} dari ${total})`;
      } else {
        counterDiv.textContent = "";
      }

      if (subset.length === 0) {
        hasilDiv.innerHTML = "<p>Tidak ada hasil pada halaman ini.</p>";
        return;
      }

      subset.forEach(a => {
        const div = document.createElement("div");
        div.className = "result";
        const ref = `Surah ${a.suraName} (${a.suraIndex}:${a.ayaIndex})`;
        div.innerHTML = `
          <button class="copy-btn" onclick="salinAyat('${a.arab.replace(/'/g,"\\'")}', '${a.indo.replace(/'/g,"\\'")}', '${ref.replace(/'/g,"\\'")}')">üìã</button>
          <div class="arab">${highlight(a.arab, query)}</div>
          <div class="indo">${highlight(a.indo, query)}</div>
          <div class="ref">${ref}</div>
        `;
        hasilDiv.appendChild(div);
      });

      buatPagination();
    }

    // ==== Pagination ====
    function buatPagination() {
      const totalHalaman = Math.ceil(hasilPencarian.length / hasilPerHalaman);
      const pagDiv = document.getElementById("pagination");
      pagDiv.innerHTML = "";
      if (totalHalaman <= 1) return;
      for (let i = 1; i <= totalHalaman; i++) {
        const btn = document.createElement("button");
        btn.textContent = i;
        if (i === halamanSaatIni) btn.classList.add("active");
        btn.onclick = () => { halamanSaatIni = i; tampilkanHasil(i); };
        pagDiv.appendChild(btn);
      }
    }

    // ==== Cari Ayat ====
    function cariAyat() {
      const query = document.getElementById("searchInput").value.trim().toLowerCase();
      const surahFilter = document.getElementById("surahSelect").value;
      const hasilDiv = document.getElementById("hasil");
      hasilDiv.innerHTML = "";
      document.getElementById("pagination").innerHTML = "";
      document.getElementById("counter").textContent = "";

      if (!query && surahFilter === "all") {
        hasilDiv.innerHTML = "<p>Ketik kata kunci atau pilih surah untuk mencari ayat.</p>";
        return;
      }

      hasilPencarian = QURAN_DATA.filter(a => {
        const cocokTeks = !query || a.arab.toLowerCase().includes(query) || a.indo.toLowerCase().includes(query);
        const cocokSurah = surahFilter === "all" || a.suraIndex.toString() === surahFilter;
        return cocokTeks && cocokSurah;
      });

      if (hasilPencarian.length === 0) {
        hasilDiv.innerHTML = "<p>Tidak ditemukan ayat yang cocok.</p>";
        return;
      }

      halamanSaatIni = 1;
      tampilkanHasil(1);
    }

    isiDropdownSurah();
    tampilkanAyatHariIni();
  </script>
</body>
</html>

















